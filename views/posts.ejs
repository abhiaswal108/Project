<%- include('./partials/header', { title: 'POST' }); %>
<h1>POST</h1>
<% if(posts?.length > 0) { %>
    <% posts.forEach(post => { %>
        <div>
        <% if(post.images && post.images.length > 0) { %>
    <p>DEBUG: Image URL is: <%= post.images[0].url %></p>
    <img src="<%= post.images[0].url %>" alt="Post image"/>
<% } %>
            <h2><%= post.title %></h2>
            <p><%= post.content %></p>
            <p>by <%= post.author?.username || "Unknown" %> on <%= post.createdAt?.toDateString() || "2025" %></p>
            <a href="/post/<%= post._id %>">Read More</a>
        </div>
    <% }) %>
<% } else { %>
    <p>No Post found</p>
<% } %>
<%- include('partials/footer') %>